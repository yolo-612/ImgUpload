<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <!-- form表单提交的方式 -->
  <!-- <form method="post" action="http://localhost:10001/api/fileUpload" enctype="multipart/form-data">
    选择文件:
        <input type="file" name="f1"/> 
        input 必须设置 name 属性，否则数据无法发送<br/>
        <br/>
        标题：<input type="text" name="title"/><br/><br/><br/>

    <button type="submit" id="btn-0">上 传</button>
  </form> -->
  <div>
    选择文件:
    <input type="file" id="f1"/><br/><br/>
    <button type="button" id="btn-submit">上 传</button>
  </div>
  <div id="fileUrl"></div>
  <script>
   function submitUpload() {
        //获得文件列表，注意这里不是数组，而是对象
      var file = document.getElementById('f1').files[0];
      
      var fd = new FormData();   //构造FormData对象

      fd.append("file", file)

      var xhr = new XMLHttpRequest();   //创建对象
      xhr.open('POST', 'http://localhost:10001/api/fileUpload', true);

      xhr.send(fd); //发送时  Content-Type默认就是: multipart/form-data; 
      xhr.onreadystatechange = function () {
          console.log('state change', xhr.readyState);
          if (this.readyState == 4 && this.status == 200) {
              var obj = JSON.parse(xhr.responseText);   //返回值
              console.log(obj);
              if(obj.data){
                  var dom = document.getElementById("fileUrl")
                  dom.innerHTML = obj.data
                  alert('上传成功');
              }
          }
      }
    }
    //绑定提交事件
    document.getElementById('btn-submit').addEventListener('click',submitUpload);
  </script>

</body>
</html>